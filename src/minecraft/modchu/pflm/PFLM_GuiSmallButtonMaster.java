package modchu.pflm;import modchu.lib.Modchu_Debug;import modchu.lib.Modchu_Main;import modchu.lib.Modchu_Reflect;import net.minecraft.client.gui.GuiButton;import net.minecraft.client.gui.GuiScreen;import net.minecraft.client.gui.GuiSmallButton;import org.lwjgl.input.Mouse;public class PFLM_GuiSmallButtonMaster extends GuiSmallButton {	public static GuiScreen parentScreen;	public static GuiSmallButton parentButton;	public static boolean anyButtonClick = false;	public static boolean allButtonOutOfRangeClick = false;	private static boolean allButtonOutOfRangeClickLock = false;	public static boolean ContinuousClickLock = false;	public boolean buttonClick = false;	public boolean buttonClickTransmission = false;	private boolean ContinuousClickLockRelease = false;	public PFLM_GuiSmallButtonMaster(GuiScreen guiscreen, GuiSmallButton guiSmallButton, int i, int x, int j, int k, int l, String s) {		super(i, x, j, k, l, s);		parentScreen = guiscreen;		parentButton = guiSmallButton;	}	public boolean mousePressed(Object par1Minecraft, int par2, int par3) {		if (ContinuousClickLock) {			ContinuousClickLockRelease = true;			//Modchu_Debug.dDebug("displayString="+displayString+" return=" + (enabled && drawButton && par2 >= xPosition && par3 >= yPosition && par2 < xPosition + width && par3 < yPosition + height), 3);			//Modchu_Debug.mDebug("mousePressed displayString="+displayString+" yPosition="+(yPosition));			if (!buttonClick) {				buttonClick = getButtonRange(par2, par3);				if (!buttonClick						&& buttonClickTransmission) buttonClickTransmission = false;				return false;			}			return false;		}		return false;	}	public void drawButton(Object par1Minecraft, int par2, int par3) {		if (!ContinuousClickLock && Mouse.isButtonDown(0)) ContinuousClickLock = true;		if (ContinuousClickLockRelease && !Mouse.isButtonDown(0)) {			ContinuousClickLock = false;			ContinuousClickLockRelease = false;		}		if (Mouse.isButtonDown(0)) {			if (buttonClick) {				buttonClickTransmission = true;			}		}		if (buttonClickTransmission				&& !Mouse.isButtonDown(0)) {			Modchu_Reflect.setFieldObject(GuiScreen.class, "field_73883_a", "selectedButton", parentScreen, parentButton);			buttonClickTransmission = false;			buttonClick = false;			if (getButtonRange(par2, par3)) {				Object mc = Modchu_Main.getMinecraft();				if (mc != null) {					Object sndManager = Modchu_Reflect.getFieldObject("Minecraft", "field_71416_A", "sndManager", mc);					if (sndManager != null) Modchu_Reflect.invokeMethod(sndManager.getClass(), "func_77366_a", "playSoundFX", new Class[]{ String.class, float.class, float.class }, sndManager, new Object[]{ "random.click", 1.0F, 1.0F });					Modchu_Reflect.invokeMethod(GuiScreen.class, "func_73875_a", "actionPerformed", new Class[]{ GuiButton.class }, parentScreen, new Object[]{ this });				}			}		}		if (!anyButtonClick) {			anyButtonClick = Mouse.isButtonDown(0)					&& getButtonRange(par2, par3);			allButtonOutOfRangeClickLock = anyButtonClick && Mouse.isButtonDown(0);			if (allButtonOutOfRangeClick) {							} else {				allButtonOutOfRangeClick = !allButtonOutOfRangeClickLock						&& !anyButtonClick						&& Mouse.isButtonDown(0);			}			if (!Mouse.isButtonDown(0)) allButtonOutOfRangeClick = false;		} else {			anyButtonClick = Mouse.isButtonDown(0);			allButtonOutOfRangeClick = Mouse.isButtonDown(0);		}		if (Mouse.isButtonDown(1)				| Mouse.isButtonDown(2)) {			allButtonOutOfRangeClick = true;		}		//Modchu_Debug.dDebug("drawButton anyButtonClick=" + anyButtonClick);		//Modchu_Debug.dDebug("drawButton allButtonOutOfRangeClick=" + allButtonOutOfRangeClick, 1);		//if (displayString.equals("showArmor")) Modchu_Debug.dDebug("buttonClickTransmission="+buttonClickTransmission+" buttonClick="+buttonClick, 4);	}	public boolean getButtonRange() {		Object mc = Modchu_Main.getMinecraft();		int i = Mouse.getEventX() * width / (Integer)Modchu_Reflect.getFieldObject("Minecraft", "field_71443_c", "displayWidth", mc);		int i2 = height - Mouse.getEventY() * height / (Integer)Modchu_Reflect.getFieldObject("Minecraft", "field_71440_d", "displayHeight", mc) - 1;		//Modchu_Debug.dDebug("getButtonRange i="+i+" i2="+i2, 5);		return getButtonRange(i, i2);	}	public boolean getButtonRange(int i, int i2) {		return enabled && drawButton && i >= xPosition && i2 >= yPosition && i < xPosition + width && i2 < yPosition + height;	}}